function previewFile(){var t=$("#ImagePreview"),i=document.querySelector("input[type=file]").files[0],n=new FileReader;n.addEventListener("load",function(){t[0].src=n.result;t.removeClass("hide");$("#btnRotate").removeClass("hide")},!1);i&&n.readAsDataURL(i)}function rotation(){var n=$("#ImagePreview");degree=degree+90;n[0].style.webkitTransform="rotate("+degree+"deg)";n[0].style.mozTransform="rotate("+degree+"deg)";n[0].style.msTransform="rotate("+degree+"deg)";n[0].style.oTransform="rotate("+degree+"deg)";n[0].style.transform="rotate("+degree+"deg)";degree===360&&(degree=0)}var files,degree;cityWay.tasks.loadFlyLeaf=function(n){"use strict";if(!!!$.cookie("loadFlyLeaf")){if(!n.url)throw new Error("At least an url has to be specified");$.ajax(n.url,{type:"GET",dataType:"html",data:{},success:function(t){if(!!t){var i=$(t);$(document.body).append(i);i.modal();i.on("hidden.bs.modal",function(){$(".modal-backdrop.in").remove()});$.cookie("loadFlyLeaf","loaded",{expires:new Date((n.expires||2)*6e4+ +new Date)})}}})}};cityWay.forms.bindInputClear=function(n,t,i){"use strict";$("#"+n).on("keydown keyup",function(r){var u=$("#"+t),f=$(this);return u.val()==""||f.val()==""?!0:r.keyCode==cityWay.keys.backspace||r.keyCode==cityWay.keys.del||r.which==cityWay.keys.backspace||r.which==cityWay.keys.del?(u.val(""),i&&cityWay.eventManager.publish(cityWay.events.journeyPlanner.searchFormChanged,n,null),cityWay.eventManager.publish(cityWay.events.form.inputShouldBeCleared,f,r.keyCode||r.which,"#"+n),!0):!0}).on("keypress",function(){var t=$(this),n=t.data("div-error");!n||$("#"+n).html("")})};cityWay.forms.DisplaySliderByObject=function(n){"use strict";var t=n.attr("data-slider-divId"),i=parseInt(n.attr("data-slider-selectedValue")),r=parseInt(n.attr("data-slider-minValue")),u=parseInt(n.attr("data-slider-maxValue")),f=parseInt(n.attr("data-slider-step")),e=n.attr("data-slider-label");cityWay.forms.DisplaySlider(n.attr("id"),t,i,r,u,f,e)};cityWay.forms.DisplayDatePicker=function(n){var i=n.attr("id"),u=n.attr("data-js-language"),t=n.attr("data-js-target"),r=n.attr("data-js-target-hidden"),f=n.attr("data-js-start-date"),e=n.attr("data-js-end-date"),o=n.attr("data-js-highlight"),s=n.attr("data-js-autoclose");$("#"+i).datepicker({language:u,startDate:f,endDate:e,todayHighlight:o,autoclose:s}).on("changeDate",function(){$("#"+t).val($("#"+r).val())});$("#"+t).val($("#"+r).val());$("#"+t).change(function(){$("#"+i).datepicker("update",$(this).val())})};cityWay.tools.sortLegendItems=function(n,t){return n.order==t.order?0:n.order<t.order?-1:1};cityWay.tools.GetAllDisruptedLines=function(n,t){if(n&&t&&(n=$(n),n[0]&&n.data("loaded")!==!0)){var i=n.find(".inset-disruption-panel");$.ajax({url:t,type:"POST",dataType:"html",beforeSend:function(){i.addClass("animated-loader black")},data:{isPreview:!1,date:new Date},success:function(t){n.data("loaded",!0);i.html(t)},complete:function(){i.removeClass("animated-loader black")}})}};getCookie=function(n){return document.cookie.length>0&&(begin=document.cookie.indexOf(n+"="),begin!=-1)?(begin+=n.length+1,end=document.cookie.indexOf(";",begin),end==-1&&(end=document.cookie.length),unescape(document.cookie.substring(begin,end))):null};unCheckIfUnspecified=function(n,t){if(t.indexOf('"'+n+'"')!=-1)return t;var i=t;return 0<i.length&&(i+=","),i+('"'+n+'":0')};unCheckAllUnspecified=function(n){var t=getCookie(n),i,r;null==t?t="":(document.cookie=n+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;",t=t.substring(1,t.length-1));t=unCheckIfUnspecified("legend_poi_3",t);t=unCheckIfUnspecified("legend_poi_201",t);t=unCheckIfUnspecified("legend_poi_204",t);t=unCheckIfUnspecified("legend_poi_207",t);t=unCheckIfUnspecified("legend_poi_1",t);t=unCheckIfUnspecified("legend_poi_10",t);t=unCheckIfUnspecified("legend_poi_202",t);t=unCheckIfUnspecified("legend_poi_205",t);t=unCheckIfUnspecified("legend_poi_2",t);t=unCheckIfUnspecified("legend_poi_200",t);t=unCheckIfUnspecified("legend_poi_203",t);t=unCheckIfUnspecified("legend_poi_206",t);t="{"+t+"}";i=new Date;i.setTime(i.getTime()+2592e6);r="; expires="+i.toUTCString();document.cookie=n+"="+t+r+"; path=/"};$(document).ready(function(){unCheckAllUnspecified("cityWay.cookies.map.legend");$("input[data-slider='1']").each(function(){cityWay.forms.DisplaySliderByObject($(this))});$("DIV[data-js-datepicker='1']").each(function(){cityWay.forms.DisplayDatePicker($(this))});$("button[data-geoloc-type]").click(function(){var n=$(this),t=n.attr("data-geoloc-type");switch(t){case"stop":cityWay.tools.getStopFromLocation(n.attr("data-geoloc-input"),n.attr("data-geoloc-target"),n.attr("data-geoloc-error"));break;case"journeyplanner":cityWay.journeyPlanner.getLocation(n.attr("data-geoloc-context"));break;case"locality":cityWay.tools.getLocality(n.attr("data-geoloc-input"),n.attr("data-geoloc-target"),n.attr("data-geoloc-error"));break;case"street":cityWay.tools.getStreet(n.attr("data-geoloc-input"),n.attr("data-geoloc-target"),n.attr("data-geoloc-error"))}});$(".my-popover").popover({html:!0});$(".member-menu .member-popover").popover({html:!0,trigger:"hover focus",placement:"top"});$(".toggle-map").on("click submit",function(){var n=$(this);return $.cookie(cityWay.consts.cookies.disabledMap,!n.hasClass("off"),{path:"/"}),window.location.href=window.location.href,window.location.reload(!0),!1});cityWay.responsive.elementGoTo();cityWay.responsive.panelClosedOnMobile();cityWay.responsive.panelLocalitiesOpenedOnMobile();cityWay.links.bindModalLinks();cityWay.tools.bindListGroupItemToggle();cityWay.ui.showJsElements(".widget-js");cityWay.ui.vscrollTo($("[data-vsroll-to]"));$("input[data-toggle-network]").on("click",function(){var t=$(this),n=$(t.data("target"));return n.size()>0&&(t.is(":checked")?n.show():n.hide()),!0});$("body").on("click","[data-action-click]",function(){var n=$(this),t=n.data("action-click");switch(t){case"hidemap":return cityWay.page.hideMap();case"reload":return window.location.reload();case"print":return window.print();case"change-carpool-point":return cityWay.journeyPlanner.changeCarPoolPoint();case"jp-reinit-profile":return cityWay.journeyPlanner.reinitProfile(n.data("user-profile"),n.data("user"));case"reset-mapview":return resetMapView();case"map-center-point":return centerMapAtPoint(n.data("point"),n.data("trip"),n.data("type-point"),null);case"map-move-center-point":return centerMapAtPoint(n.data("new-point"),n.data("trip"),n.data("type-point"),null);case"map-center-latlng":return centerMapAtLatLng([[n.data("lat"),n.data("lng")]],null);case"hide-roadnotfound":return cityWay.notificationManager.hideModal(cityWay.notificationManager.modalId.roadNotFound)}});cityWay.eventManager.subscribe(cityWay.events.map.responsiveOpenPopup,function(n){if($(window).width()<=cityWay.responsive.getSize("screenSmMax")){if(n.isDepartureNode()||n.isViaNode()||n.isArrivalNode())return;n.setFocusSelectedNode()}});$("[data-focus-to]").on("click",function(){return cityWay.page.moveFocus($(this).data("focus-to"))});$("body").on("click","[data-btn-spinner]",function(){var i=$(this).closest("form"),t,n;i.valid()&&($(this).addClass("disabled"),$(this).children(".spinner").length>0?(t=$(this).children(".spinner").detach(),$(this).text($(this).data("loading-text")),$(this).prepend(t)):(n=$("<span/>").attr("class","spinner"),n.attr("aria-busy","true"),$(this).text($(this).data("loading-text")),$(this).prepend(n)),$(this).children(".spinner").css("visibility","visible"),$(this).children(".spinner").attr("aria-busy","true"))});$("body").on("click","[data-link-spinner]",function(){$(this).addClass("disabled");$(this).children(".spinner").css("visibility","visible");$(this).children(".spinner").attr("aria-busy","true")});$("body").on("click","[data-anchor-to]",function(){cityWay.ui.vscrollTo($(this).attr("data-anchor-to"))});window.addEventListener?window.addEventListener("load",function(){cityWay.tools.lazyLoad(cityWay.config.urls.jsAccessibility)},!1):window.attachEvent&&window.attachEvent("onload",function(){cityWay.tools.lazyLoad(cityWay.config.urls.jsAccessibility)});$("body").on("click","[data-btn-localities]",function(){$(".panel-search-linetimetable").toggleClass("panel-selection")});$("body").on("click",'[data-click="panel-quickaccess"]',function(n){var i=$(n.currentTarget),t;$('[data-click="panel-quickaccess"]').removeClass("active");i.addClass("active");t=i.hasClass("quickaccess-btn-horaires");$(".quickaccess-box-horaires").toggleClass("hidden-sm hidden-md hidden-lg",!t);$(".quickaccess-box-ri").toggleClass("hidden-sm hidden-md hidden-lg",t);t?$("#quickaccess-horaires").hasClass("in")||$(".panel-quickaccess-horaires .panel-quickaccess-link").click():$("#quickaccess-ri").hasClass("in")||$(".panel-quickaccess-ri .panel-quickaccess-link").click()});$(".panel-quickaccess").on("shown.bs.collapse",function(){if(window.matchMedia("(max-width:"+cityWay.responsive.getSize("screenXsMax")+"px)").matches){var n=$(this).find(".in");$("html, body").animate({scrollTop:n.offset().top},500)}});$("body").on("click","[data-sliding-panel]",function(n){var t=$(n.currentTarget);cityWay.tools.GetAllDisruptedLines(t.attr("href"),t.data("sliding-panel"))});if(location.hash==$("[data-sliding-panel]").attr("href")){var n=$("[data-sliding-panel]").attr("href"),t=$("[data-sliding-panel]").data("sliding-panel");cityWay.tools.GetAllDisruptedLines(n,t)}$("body").on("click","[data-sliding-panel-refresh]",function(n){var i=$(n.currentTarget),t=$(i.data("sliding-panel-refresh")),r=i.data("sliding-panel-refresh-url");t[0]&&$.ajax({url:r,type:"POST",dataType:"html",beforeSend:function(){t.html("").addClass("animated-loader black")},data:{isPreview:!1,date:new Date},success:function(n){t.html(n)},complete:function(){t.removeClass("animated-loader black")}})});$("body").on("shown.bs.collapse","[data-menu-scroll-rwd='true']",function(){cityWay.responsive.menuTopScrollIndicator()}).on("hidden.bs.collapse","[data-menu-scroll-rwd='true']",function(){cityWay.responsive.menuTopScrollIndicator()}).on("shown.bs.dropdown","[data-menu-scroll-rwd='true'] .dropdown",function(){cityWay.responsive.menuTopScrollIndicator()}).on("hidden.bs.dropdown","[data-menu-scroll-rwd='true']",function(){cityWay.responsive.menuTopScrollIndicator()});$("body").on("show.bs.modal",".modal",function(){$(this).attr("aria-hidden")&&$(this).attr("aria-hidden","false")}).on("hide.bs.modal",".modal",function(){$(this).attr("aria-hidden")&&$(this).attr("aria-hidden","true")})});cityWay.eventManager.subscribe(cityWay.events.map.nearestRoadNotFound,function(){cityWay.notificationManager.showModal(cityWay.notificationManager.modalId.roadNotFound)});$("body").on("change","[data-upload='1']",function(n){var t=$(this);$("[data-file-upload]").removeAttr("disabled");files=n.target.files});$("body").on("click","[data-file-upload]",function(){var t,n,i,r;if(files.length>0&&window.FormData!==undefined){for(t=new FormData,n=0;n<files.length;n++)t.append("file"+n,files[n]);i=$(this);r=i.data("file-upload");$.ajax({type:"POST",url:"AddAttachement?isPicture="+r+"&rotate="+degree,contentType:!1,processData:!1,data:t,success:function(n){$('[data-result="1"]').html(n)}})}});$("body").on("click","[data-upload-file-delete]",function(n){var t=$(this);n.preventDefault();$("#confirm"+t.data("upload-file-delete")).modal("show")});$(".carousel-inner").each(function(){$(this).children("div").length===1&&$(this).siblings(".carousel-control, .carousel-indicators").hide()});degree=0;$(function(){var n=$("input[data-autocomplete='1']");n.each(function(){var n=$(this),i=n.attr("id"),r=n.attr("data-autocomplete-target"),o=n.attr("data-autocomplete-type"),u=n.attr("data-autocomplete-point-type"),t=n.attr("data-autocomplete-point-nbItem"),f=n.attr("data-autocomplete-point-categories"),s=n.attr("data-autocomplete-line-showPartner"),h=n.attr("data-autocomplete-line-selectPartner"),c=n.attr("data-autocomplete-exclude-partners"),e=n.attr("data-input-clear");u==null&&(u="");t==""&&(t=null);switch(o){case"point":cityWay.config.site.autocompV3.isEnabled&&!cityWay.config.site.autocompV3.isInternal?cityWay.forms.autocomplete.addAutocompletePointV3(i,r,u,t,f):cityWay.forms.autocomplete.addAutocompletePoint(i,r,u,t,f);break;case"locality":cityWay.config.site.autocompV3.isEnabled&&!cityWay.config.site.autocompV3.isInternal?cityWay.forms.autocomplete.addAutocompleteLocalityV3(i,r,t):cityWay.forms.autocomplete.addAutocompleteLocality(i,r,t);break;case"line":cityWay.forms.autocomplete.addAutocompleteLine(i,r,s,t,h,c)}e!=null&&e=="1"&&cityWay.forms.bindInputClear(i,r,!0)})});$(".link-detail").on("click",function(){cityWay.journeyPlanner.displayDetail($(this).attr("data-num"));cityWay.journeyPlanner.displayReturnLink($(this).attr("data-link-return"))});$("#show-result").on("click",function(){cityWay.journeyPlanner.displayResult();cityWay.journeyPlanner.displayReturnLink($(this).attr("data-link-return"))});$("BUTTON[data-moreoption]").on("click",function(){var n=$(this).attr("data-moreoption");n+="?back=1";n+="&expandCriteria=1";n+="&KeywordDep="+document.getElementById("KeywordDep").value;n+="&PointDep="+document.getElementById("PointDep").value;n+="&KeywordArr="+document.getElementById("KeywordArr").value;n+="&PointArr="+document.getElementById("PointArr").value;n+="&Date="+document.getElementById("Date").value;n+="&calendar="+document.getElementById("calendar").value;n+="&TypeDate="+document.getElementById("TypeDate").value;n+="&Hour="+document.getElementById("Hour").value;n+="&Minute="+document.getElementById("Minute").value;window.location.href=n});cityWay.journeyPlanner={request:null,divModal:"modal",divResult:"result",dayRequest:0,showModal:function(){$("#"+cityWay.journeyPlanner.divModal).modal("show")},hideModal:function(){$("#"+cityWay.journeyPlanner.divModal).modal("hide");$("#result").focus()}};cityWay.journeyPlanner.initForm=function(){$(".btn-loading").on("click",function(){$(this).button("loading")});$(".btn-loading").removeAttr("disabled");$(".btn-loading").button("reset");$(document).ready(function(){$("#transport-mode").removeClass("active");$("#linkAddVia").on("click",function(){$("#formVia").removeClass("hidden");cityWay.forms.DisplaySliderByObject($("#DurationVia"));$("#linkAddVia").addClass("hidden")});$("#linkRemoveVia").on("click",function(){$("#formVia").addClass("hidden");cityWay.journeyPlanner.clearSelection("Via");$("#linkAddVia").removeClass("hidden");cityWay.eventManager.publish(cityWay.events.journeyPlanner.searchFormChanged,"KeywordVia",null)});if($("select#TypeDate").change(function(){this.value==65||this.value==68?($("#Hour").removeAttr("disabled"),$("#Minute").removeAttr("disabled")):($("#Hour").attr("disabled","disabled"),$("#Minute").attr("disabled","disabled"))}),document.getElementById("TypeDate")!=null){var n=document.getElementById("TypeDate").value;n!=65&&n!=68&&($("#Hour").attr("disabled","disabled"),$("#Minute").attr("disabled","disabled"))}})};cityWay.journeyPlanner.displayResult=function(){"use strict";var n=300;$("#show-result").fadeOut(n);$(".trips .panel-trip").removeClass("panel-primary");$(".trips .link-detail").attr("aria-expanded","false");$(".trips .panel-trip").slideDown(n);$(".detail-trip").slideUp(n);cityWay.ui.vscrollTo("#result")};cityWay.journeyPlanner.displayDetail=function(n){"use strict";var t=300;cityWay.journeyPlanner.displayReturnLink($("#link_solution"+n).data("link-return"));$(".trips .panel-trip").not("#solution"+n).slideUp(t);$("#solution"+n).addClass("panel-primary");$("#link_solution"+n).attr("aria-expanded","true");$("#trip"+n).slideDown(t);$("#show-result").fadeIn(t);cityWay.ui.vscrollTo("#trips-solutions")};cityWay.journeyPlanner.callResult=function(n){return cityWay.journeyPlanner.request.IgnoreDisruptions=n==!0?!0:!1,$.ajax({url:"./PartialResult",type:"POST",data:{request:JSON.stringify(cityWay.journeyPlanner.request)},success:function(n){$("#"+cityWay.journeyPlanner.divResult).html(n);cityWay.page.stickyMap()}})};cityWay.journeyPlanner.callResultWithoutDisruption=function(){var n=$.Deferred();cityWay.journeyPlanner.showModal();cityWay.journeyPlanner.callResult(!0).always(function(){n.resolve()});n.always(function(){cityWay.journeyPlanner.hideModal()})};cityWay.journeyPlanner.displayReturnLink=function(n){$("#link-return").length&&$("#link-return").attr("href",n)};cityWay.journeyPlanner.updateReturnLink=function(n,t,i,r){if($("#link-return").length){var u=$("#link-return").attr("href");u=cityWay.tools.updateParamUrl(u,"point"+n,t);u=cityWay.tools.updateParamUrl(u,"lat"+n,i);u=cityWay.tools.updateParamUrl(u,"lng"+n,r);u=cityWay.tools.updateParamUrl(u,"num"+n,"");u=cityWay.tools.updateParamUrl(u,"keyword"+n,"");$("#link-return").attr("href",u)}};cityWay.journeyPlanner.displayModifyLink=function(n){$("#link-modify-trip").length&&$("#link-modify-trip").attr("href",n)};cityWay.journeyPlanner.setPoint=function(n,t,i,r){var u=$("#Point"+n),f=!1,e;t==i&&(f=!0);$("#Selected"+n).length?f?$("#Selected"+n).html(t):$("#Selected"+n).html(t+' <span class="locality-name">'+i+"<\/span>"):u.prop("type")=="select-one"?f?u.append($("<option><\/option>").attr("value",r).text(t)):u.append($("<option><\/option>").attr("value",r).text(t+" - "+i)):(e=t+" - "+i,f&&(e=t),$("#Keyword"+n).attr("data-autocomplete")?$("#Keyword"+n).typeahead("val",e):$("#Keyword"+n).val(e));u.val(r);u.parents("fieldset:first").find(".error-message").remove();cityWay.tools.setInputValue("Lat"+n,"");cityWay.tools.setInputValue("Lng"+n,"")};cityWay.journeyPlanner.setDeparture=function(n,t,i,r,u,f){var e=i.split("_"),o=e.length>0?e[1]:0;return cityWay.journeyPlanner.setPoint("Dep",n,t,i),cityWay.journeyPlanner.request.PointDep=i,cityWay.journeyPlanner.request.LatDep=u,cityWay.journeyPlanner.request.LngDep=f,cityWay.journeyPlanner.request.NumDep=null,cityWay.journeyPlanner.request.Departure={$type:cityWay.journeyPlanner.getTypeTripPoint(o),Id:e.length>0?e[0]:0,TypePoint:o,Value:i,Name:n,Locality:{Id:r,Name:t}},cityWay.journeyPlanner.callResult()};cityWay.journeyPlanner.setArrival=function(n,t,i,r,u,f){var e=i.split("_"),o=e.length>0?e[1]:0;return cityWay.journeyPlanner.setPoint("Arr",n,t,i),cityWay.journeyPlanner.request.PointArr=i,cityWay.journeyPlanner.request.LatArr=u,cityWay.journeyPlanner.request.NumArr=null,cityWay.journeyPlanner.request.LngArr=f,cityWay.journeyPlanner.request.Arrival={$type:cityWay.journeyPlanner.getTypeTripPoint(o),Id:e.length>0?e[0]:0,TypePoint:o,Value:i,Name:n,Locality:{Id:r,Name:t}},cityWay.journeyPlanner.callResult()};cityWay.journeyPlanner.setVia=function(n,t,i,r,u,f){var e=i.split("_"),o=e.length>0?e[1]:0;return cityWay.journeyPlanner.setPoint("Via",n,t,i),cityWay.journeyPlanner.request.PointVia=i,cityWay.journeyPlanner.request.LatVia=u,cityWay.journeyPlanner.request.LngVia=f,cityWay.journeyPlanner.request.NumVia=null,cityWay.journeyPlanner.request.Via={$type:cityWay.journeyPlanner.getTypeTripPoint(o),Id:e.length>0?e[0]:0,TypePoint:o,Value:i,Name:n,Locality:{Id:r,Name:t}},cityWay.journeyPlanner.callResult()};cityWay.journeyPlanner.getTypeTripPoint=function(n){switch(n){case cityWay.pointType.poi:return"Cityway.TSI.Core.Model.Transport.PlaceModel, Cityway.TSI.Core";case cityWay.pointType.logicalStop:return"Cityway.TSI.Core.Model.Transport.LogicalStopModel, Cityway.TSI.Core";default:return"Cityway.TSI.Core.Model.Transport.RoadModel, Cityway.TSI.Core"}};cityWay.journeyPlanner.searchFormChangedHandler=function(n,t,i,r,u,f){var h,e,s,o;if(i==="KeywordDep"?(cityWay.tools.setInputValue("LatDep",""),cityWay.tools.setInputValue("LngDep",""),cityWay.tools.setInputValue("NumDep",u)):i==="KeywordVia"?(cityWay.tools.setInputValue("LatVia",""),cityWay.tools.setInputValue("LngVia",""),cityWay.tools.setInputValue("NumVia",u)):i==="KeywordArr"&&(cityWay.tools.setInputValue("LatArr",""),cityWay.tools.setInputValue("LngArr",""),cityWay.tools.setInputValue("NumArr",u)),r==null&&f){h=null;i!=="KeywordDep"||!t.departureNode?i!=="KeywordVia"||!t.viaNode?i!=="KeywordArr"||!t.arrivalNode||(h=t.arrivalNode,t.arrivalNode.unlock(),t.arrivalNode.closePopup(),t.arrivalNode=null):(h=t.viaNode,t.viaNode.unlock(),t.viaNode.closePopup(),t.viaNode=null):(h=t.departureNode,t.departureNode.unlock(),t.departureNode.closePopup(),t.departureNode=null);f&&(s=Enumerable.From(t).Where(function(n){return!!n.Value}).Select(function(n){return n.Value}).ToArray(),o=Enumerable.From(s).Select(function(n){return[n.latitude,n.longitude]}).ToArray(),n.removeNode(h),o.length>0&&n.fitBounds(17,o));return}!!r&&(r.Latitude||r.Longitude)&&(i==="KeywordDep"&&(cityWay.tools.setInputValue("LatDep",r.Latitude),cityWay.tools.setInputValue("LngDep",r.Longitude),f&&(e=cityWay.mapNodeFactory.createNodeFromAny(n,r,!1),e.setDepartureNode(),e.lock(),t.departureNode=e,e.openPopup(),s=Enumerable.From(t).Where(function(n){return!!n.Value}).Select(function(n){return n.Value}).ToArray(),o=Enumerable.From(s).Select(function(n){return[n.latitude,n.longitude]}).ToArray(),n.addNode(e),n.fitBounds(17,o))),i==="KeywordVia"&&(cityWay.tools.setInputValue("LatVia",r.Latitude),cityWay.tools.setInputValue("LngVia",r.Longitude),f&&(e=cityWay.mapNodeFactory.createNodeFromAny(n,r,!1),e.setViaNode(),e.lock(),t.viaNode=e,e.openPopup(),s=Enumerable.From(t).Where(function(n){return!!n.Value}).Select(function(n){return n.Value}).ToArray(),o=Enumerable.From(s).Select(function(n){return[n.latitude,n.longitude]}).ToArray(),n.addNode(e),n.fitBounds(17,o))),i==="KeywordArr"&&(cityWay.tools.setInputValue("LatArr",r.Latitude),cityWay.tools.setInputValue("LngArr",r.Longitude),f&&(e=cityWay.mapNodeFactory.createNodeFromAny(n,r,!1),e.setArrivalNode(),e.lock(),t.arrivalNode=e,e.openPopup(),s=Enumerable.From(t).Where(function(n){return!!n.Value}).Select(function(n){return n.Value}).ToArray(),o=Enumerable.From(s).Select(function(n){return[n.latitude,n.longitude]}).ToArray(),n.addNode(e),n.fitBounds(17,o))))};cityWay.journeyPlanner.initTimeTable=function(n,t){$(".link-timetable-detail").on("click",function(){cityWay.journeyPlanner.displayTimeTableResult($(this).attr("data-num"))});$(".link-timetable-result").on("click",function(){cityWay.journeyPlanner.displayTimeTableDetail($(this).attr("data-num"))});cityWay.journeyPlanner.callTimeTable(n,1,t)};cityWay.journeyPlanner.callTimeTable=function(n,t,i){return $.ajax({url:"/api/JourneyPlanner/"+cityWay.journeyPlanner.request.TypeTrip+"Json",type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(cityWay.journeyPlanner.request),success:function(r){var e,f,u,o,s;r.StatusCode==cityWay.StatusCode.Ok?(e=new RegExp("([0-9]+)T([0-9]+):([0-9]+):([0-9]+)"),e.exec(r.Data[0].DepartureTime)!=null&&(f=RegExp.$2,u=RegExp.$3,u=Number(u)+1,o=Number(f)*60+u,s=cityWay.journeyPlanner.request.TypeTrip!="WalkTrip"||cityWay.journeyPlanner.request.TypeTrip=="WalkTrip"&&cityWay.journeyPlanner.request.WalkDistance>=r.Data[0].Distance,cityWay.journeyPlanner.dayRequest!=RegExp.$1?$("#"+cityWay.journeyPlanner.divModal).addClass("hidden"):o<i&&s?cityWay.journeyPlanner.RenderTimeTable(r.Data[0],n,t,i,f,u,!1):cityWay.journeyPlanner.request.TypeTrip=="WalkTrip"?(cityWay.journeyPlanner.request.TypeTrip="PlanTrip",cityWay.journeyPlanner.callTimeTable(n,t,i)):(t==1&&cityWay.journeyPlanner.RenderTimeTable(null,n,t,i,0,0,!0),$("#"+cityWay.journeyPlanner.divModal).addClass("hidden")))):cityWay.journeyPlanner.request.TypeTrip=="WalkTrip"?(cityWay.journeyPlanner.request.TypeTrip="PlanTrip",cityWay.journeyPlanner.callTimeTable(n,t,i)):(t==1&&cityWay.journeyPlanner.RenderTimeTable(null,n,t,i,0,0,!0),$("#"+cityWay.journeyPlanner.divModal).addClass("hidden"))},error:function(){$("#"+cityWay.journeyPlanner.divModal).addClass("hidden")}})};cityWay.journeyPlanner.RenderTimeTable=function(n,t,i,r,u,f,e){return $.ajax({url:"./PartialTimeTable",type:"POST",data:{result:JSON.stringify(n),typeDate:t,tripNum:i,request:JSON.stringify(cityWay.journeyPlanner.request),nosolution:e},success:function(n){$("#"+cityWay.journeyPlanner.divResult).removeClass("hidden");e?$("#"+cityWay.journeyPlanner.divResult).html(n):($("#"+cityWay.journeyPlanner.divResult).append(n),cityWay.journeyPlanner.request.Hour=Number(u),cityWay.journeyPlanner.request.Minute=Number(f),cityWay.journeyPlanner.request.TypeTrip=="WalkTrip"&&(cityWay.journeyPlanner.request.TypeTrip="PlanTrip"),cityWay.journeyPlanner.callTimeTable(t,i+1,r))}})};cityWay.journeyPlanner.displayTimeTableResult=function(n){$("#timetable-detail-"+n).addClass("hidden");$("#timetable-result-"+n).removeClass("hidden")};cityWay.journeyPlanner.displayTimeTableDetail=function(n){$("#timetable-result-"+n).addClass("hidden");$("#timetable-detail-"+n).removeClass("hidden")};cityWay.journeyPlanner.changeCarPoolPoint=function(){var n=$.Deferred(),t;cityWay.journeyPlanner.showModal();t=document.getElementById("PointInt").value;cityWay.journeyPlanner.request.PointInt=t;cityWay.journeyPlanner.callResult().always(function(){n.resolve()});n.always(function(){cityWay.journeyPlanner.hideModal()})};cityWay.journeyPlanner.reinitProfile=function(n,t){var i,r,u,f,e,o,s,h;t||(t=0);n?$.ajax({url:"/api/Member/GetProfile",type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",data:{userId:t},success:function(n){n.StatusCode=="0"&&(cityWay.forms.setValueSlider("CarDistance","sliderCarDistance",n.Data.CarDistance),cityWay.forms.setValueSlider("BikeDistance","sliderBikeDistance",n.Data.BikeDistance),cityWay.forms.setValueSlider("WalkDistance","sliderWalkDistance",n.Data.WalkDistance),cityWay.forms.setValueSlider("WalkSpeed","sliderWalkSpeed",n.Data.WalkSpeed),!n.Data.PtProfile||$("#PtProfile").val(n.Data.PtProfile),!n.Data.CarProfile||$("#CarProfile").val(n.Data.CarProfile),!n.Data.BikeProfile||$("#BikeProfile").val(n.Data.BikeProfile),!n.Data.WalkProfile||$("#WalkProfile").val(n.Data.WalkProfile))}}):(i=$("#Algorithm").attr("data-defaultvalue"),!i||cityWay.forms.setValueSlider("Algorithm","sliderAlgorithm",i),r=$("#CarDistance").attr("data-slider-defaultvalue"),!r||cityWay.forms.setValueSlider("CarDistance","sliderCarDistance",r),u=$("#BikeDistance").attr("data-slider-defaultvalue"),!u||cityWay.forms.setValueSlider("BikeDistance","sliderBikeDistance",u),f=$("#BikeSpeed").attr("data-defaultvalue"),!f||cityWay.forms.setValueSlider("BikeSpeed","sliderBikeSpeed",f),e=$("#WalkDistance").attr("data-slider-defaultvalue"),!e||cityWay.forms.setValueSlider("WalkDistance","sliderWalkDistance",e),o=$("#WalkSpeed").attr("data-defaultvalue"),!o||cityWay.forms.setValueSlider("WalkSpeed","sliderWalkSpeed",o),s=$("#BikeLeave").attr("data-defaultvalue"),!s||cityWay.forms.setValueSlider("BikeLeave","sliderBikeLeave",s),h=$("#CarLeave").attr("data-defaultvalue"),!h||cityWay.forms.setValueSlider("CarLeave","sliderCarLeave",h),$("#BikeSecure").prop("checked",!1));$("#network input[type=checkbox]").prop("checked",!0);$("#mode input[type=checkbox]").prop("checked",!0)};cityWay.journeyPlanner.clearSelection=function(n){document.getElementById("Keyword"+n).value="";document.getElementById("Point"+n).value="";document.getElementById("Lat"+n).value="";document.getElementById("Lng"+n).value=""};cityWay.journeyPlanner.avoidStop=function(n){var t=$.Deferred();cityWay.journeyPlanner.showModal();cityWay.journeyPlanner.request.AvoidStops.push(n);cityWay.journeyPlanner.callResult().always(function(){t.resolve()});t.always(function(){cityWay.journeyPlanner.hideModal()})};cityWay.journeyPlanner.getLocation=function(n){var t="Keyword"+n,r="Point"+n,u="Num"+n,f="Lat"+n,e="Lng"+n,i="error"+n;cityWay.tools.setInputValue(t,"");$("#"+t).addClass("loading");cityWay.tools.setInputValue(r,"");$("#warning-Num"+n).length&&$("#warning-Num"+n).html("");cityWay.tools.setInputValue(f,"");cityWay.tools.setInputValue(e,"");cityWay.eventManager.publish(cityWay.events.geolocation.get,{});cityWay.eventManager.subscribe(cityWay.events.geolocation.found,function(r){var f=r.coords.latitude,e=r.coords.longitude;cityWay.roadDataService.getNearestRoad(f,e).then(function(r){r.Data?(cityWay.journeyPlanner.setPoint(n,r.Data.Name,r.Data.Locality.Name,r.Data.Id+"_"+cityWay.pointType.roadLink),cityWay.eventManager.publish(cityWay.events.journeyPlanner.searchFormChanged,t,r.Data,u)):(cityWay.eventManager.publish(cityWay.events.journeyPlanner.searchFormChanged,t,null),$("#"+i).html(cityWay.texts.error.Geolocation_NotFound))},function(){cityWay.eventManager.publish(cityWay.events.journeyPlanner.searchFormChanged,t,null);$("#"+i).html(cityWay.texts.error.Geolocation_NotFound)});$("#"+t).removeClass("loading")});cityWay.eventManager.subscribe(cityWay.events.geolocation.error,function(n){var r="Error";n==cityWay.GeolocationErrorCode.PermissionDenied?r=cityWay.texts.error.Geolocation_PermissionDenied:n==cityWay.GeolocationErrorCode.PositionUnavailable||n==cityWay.GeolocationErrorCode.Timeout?r=cityWay.texts.error.Geolocation_NotFound:n==cityWay.GeolocationErrorCode.NotSupported&&(r=cityWay.texts.error.Geolocation_NotSupported);cityWay.eventManager.publish(cityWay.events.journeyPlanner.searchFormChanged,t,null);$("#"+t).removeClass("loading");$("#"+t).attr("aria-describedby","#error"+t);$("#"+t).attr("aria-invalid","true");$("#"+i).html(r)})};cityWay.journeyPlanner.removeError=function(n){var t=$("#"+n).parents(".has-error");t.removeClass("has-error");$("#"+n).attr("aria-invalid",!1);$("#"+n).removeAttr("aria-describedby");!t||$("."+n+"-error").html("")};$(document).ready(function(){$(".template-accordion-link").click(function(){var i=$(this),n=$("#"+i.attr("data-ref")),t=i.children(".waiting");t.removeClass("invisible");n.html()!=""?t.addClass("invisible"):$.ajax({url:n.attr("data-target"),dataType:"html",cache:!1,success:function(i){var r=i.replace(/<h2>/g,"<h3>");r=r.replace(/<\/h2>/g,"<\/h3>");n.html(r);t.addClass("invisible")}})});$(".document_tabs .tab-link").click(function(){var t=$(this),n=$(t.attr("href"));n.html()==""&&(n.html('<img src="/Content/img/common/ajax-loader.gif" width="24" height="24" />'),$.ajax({url:n.attr("data-target"),dataType:"html",cache:!1,success:function(t){var i=t.replace(/<h2>/g,"<h3>");i=i.replace(/<\/h2>/g,"<\/h3>");n.html(i)}}))});cityWay.eventManager.subscribe(cityWay.events.template.showPanel,function(n){$('a[href="'+n+'"]').trigger("click")});$("#tab-link-1").trigger("click");fakewaffle.responsiveTabs(["xs"]);$(".document_list_combo .submit-page").click(function(){var t=$("#pageId option:selected"),i=$(t).attr("data-ref"),n=$("#containerZone");return n.html('<div class="waiting"><\/div>'),$.ajax({url:i,dataType:"html",cache:!1,success:function(t){n.html(t)}}),!1});$("SELECT[data-partner-id=TRUE]").change(function(){var n=$("SELECT[data-partner-id=TRUE]").val(),t=!0;$("SPAN[data-news-item-list-partner]").each(function(i,r){n=="0"||n==$(r).text()?($(r).parent().fadeIn(),t=!1):$(r).parent().fadeOut()});$("DIV[data-no-news]").toggle(t)})});$(function(){cityWay.TimeTableManager=function(n){"use strict";function i(n,i,r){t.setNodes(n);t.setItineraries(i);t.redrawMap();t.hasNodes()&&r&&t.fitBounds()}function f(n,i,r,u){var o,h,f,e,s,a,c,l;if(n.Data){o=cityWay.mapNodeFactory.createNodeArrayFromPhysicalStops(t,n.Data.AllStopPoints);o.forEach(function(n){n.lineId=u});h=[];f=n.Data.ItineraryItems;for(e in f)(s=Enumerable.From(f[e].StopPointIds).Join(Enumerable.From(o),function(n){return n},function(n){return n.id},function(n,t){return t}).ToArray(),s.length!=0)&&(a=Enumerable.From(s).Select(function(n){return[n.latitude,n.longitude]}).ToArray(),c=cityWay.mapItineraryFactory.createItinerary(t,{id:f[e].Id||0}),h.push(c),l=null,f[e].Geometries&&f[e].Geometries.length>0&&(l=f[e].Geometries),c.addPortion(cityWay.mapItineraryFactory.createPortion(t,{points:a,nodes:s,disablePopup:!0,steps:l,label:i,className:r})));return{nodes:o,itineraries:h}}return{nodes:[],itineraries:[]}}function e(n,r,u,e,o){t.isBusy(!0);var s=$.Deferred(),h=t.globals[cityWay.consts.map.globals.selectedDate];return cityWay.mapDataService.getLineItineraries(n,r,h).then(function(h){if(h.StatusCode==cityWay.StatusCode.Ok){var c=f(h,e,o,n);i(c.nodes,c.itineraries,u);s.resolve()}else t.isBusy(!0),cityWay.mapDataService.getLineItineraries(n,r,null).then(function(t){if(t.StatusCode==cityWay.StatusCode.Ok){var r=f(t,e,o,n);i(r.nodes,r.itineraries,u);s.resolve()}},function(){s.reject()}).always(function(){t.isBusy(!1)})},function(){s.reject()}).always(function(){t.isBusy(!1)}),s.promise()}function o(n,r,e,o,s,h){t.isBusy(!0);var c=$.Deferred(),l=t.globals[cityWay.consts.map.globals.selectedDate];return cityWay.mapDataService.getLineItineraries(r,e,l).then(function(l){var a,v,y,p;l.Data?(a=f(l,s,h,r),v=Enumerable.From(a.nodes).FirstOrDefault(null,function(t){return t.id===n}),v?(y=v.latitude,p=v.longitude,cityWay.mapDataService.getPlacesNearPoint(y,p,o||500).then(function(n){var f=window.L.circle([y,p],o||500,{className:"poi-circle-zone"}),r;t.mapControl.addLayer(f);n.Data&&(r=cityWay.mapNodeFactory.createNodeArrayFromPointOfInterests(t,n.Data),a.nodes=a.nodes.concat(r));i(a.nodes,a.itineraries);u(v.id,!0,!0,15)})):(i(a.nodes,a.itineraries),t.fitBounds(),t.showWarningMessage(cityWay.texts.map.Message_StopNotLocalizable))):cityWay.mapDataService.getLineItineraries(r,e,null).then(function(e){var l,a,v,y;e.Data?(l=f(e,s,h,r),a=Enumerable.From(l.nodes).FirstOrDefault(null,function(t){return t.id===n}),a?(v=a.latitude,y=a.longitude,cityWay.mapDataService.getPlacesNearPoint(v,y,o||500).then(function(n){var r,f;n.Data&&(r=window.L.circle([v,y],o||500,{className:"poi-circle-zone"}),t.mapControl.addLayer(r),f=cityWay.mapNodeFactory.createNodeArrayFromPointOfInterests(t,n.Data),l.nodes=l.nodes.concat(f));i(l.nodes,l.itineraries);u(a.id,!0,!0,15)})):(i(l.nodes,l.itineraries),t.fitBounds(),t.showWarningMessage(cityWay.texts.map.Message_StopNotLocalizable))):c.resolve()},function(){c.reject()}).always(function(){t.isBusy(!1)})},function(){c.reject()}).always(function(){t.isBusy(!1)}),c.promise()}function u(n,i,r,u){if(n){var f=Enumerable.From(t.nodes()).Where(function(t){return t.id===n}).ToArray();f.length&&(f[0].fitBounds(u||16),i&&!t.isLocked()&&setTimeout(function(){f[0].openPopup()},600),r&&f[0].setSelectedNode())}}function s(n){t.isBusy(!0);var i=$.Deferred();return cityWay.mapDataService.getStops(n).then(function(n){var r,u,f,i;if(n.Data){r=cityWay.mapNodeFactory.createNodeArrayFromAny(t,n.Data);t.setNodes(r,!0);t.fitBounds(18);var e=cityWay.mapIconSize.getIconSize(cityWay.pointType.physicalStop,!1,!1,!1,!1),o=cityWay.mapIconSize.getIconAnchor(cityWay.pointType.physicalStop,!1,!1,!1,!1),s=cityWay.mapIconSize.getPopupAnchor(cityWay.pointType.physicalStop,!1,!1,!1,!1),h=cityWay.mapIconFactory.createDivIcon({className:cityWay.consts.map.css.physicalGroupedNode,iconSize:e,iconAnchor:o,popupAnchor:s});for(u in n.Data)f=n.Data[u].Id,i=t.getNode(f+"_"+cityWay.pointType.physicalStop),i.setIsLogicalStopGrouped(!0),i.marker.setIcon(h),i.lock()}},function(){i.reject()}).always(function(){t.isBusy(!1)}),i.promise()}if(!n||!n.map)throw new Error("Options must be specified");var t=n.map,r=this;return cityWay.eventManager.subscribe(cityWay.events.lineTimeTable.stopLinkClicked,function(n,i,r,f){var o=!1,s;$(window).width()<=cityWay.responsive.getSize("screenXsMax")?(cityWay.page.showMap(),o=!0):($("#mapTab").tab("show"),cityWay.ui.vscrollTo("#mapTab"));t.hasNodes()?setTimeout(function(){u(i,!0,o)}):(s=e(r,f),s.then(function(){setTimeout(function(){u(i,!0,o)})}))}),r.drawLineItinerariesOnMap=e,r.drawStopOnMap=o,r.zoomOnStop=u,r.zoomOnLogicalStop=s,r}});$(function(){cityWay.NearByManager=function(n){"use strict";function r(n){return Enumerable.From(n).Except(t._internalNodes(),function(n){return n.id+"_"+n.pointType}).ToArray()}function u(n,i){return Enumerable.From(t._internalNodes()).FirstOrDefault(undefined,function(t){return t.id==n&&t.pointType==i})}function e(n,i,e,o){var l,s,a,p,w,h,v,c,b,y;if(t.isBusy(!0),l=$.Deferred(),!!n){a=!1;t._internalNodes().length===0&&(p=cityWay.mapNodeFactory.createNodeArrayFromAny(t,i),w=r(p),window.ko.utils.arrayPushAll(t._internalNodes,w),a=!0);s=t.getNodeByIdAndType(n.Id,n.TypePoint);s.lock();s.openPopup();s.setDraggable(!0);s.marker.on("dragend",f);if(h=e||500,v=!1,!s.circle||s.circle.getRadius()==h?!!s.circle||(s.circle=window.L.circle([s.latitude,s.longitude],h,{className:"poi-circle-zone"}),t.mapControl.addLayer(s.circle)):(s.circle.setRadius(h),s.circle.redraw(),v=!0),o!=null){var nt=cityWay.mapIconSize.getIconSize(cityWay.pointType.physicalStop,!1,!1,!1,!1),tt=cityWay.mapIconSize.getIconAnchor(cityWay.pointType.physicalStop,!1,!1,!1,!1),it=cityWay.mapIconSize.getPopupAnchor(cityWay.pointType.physicalStop,!1,!1,!1,!1),rt=cityWay.mapIconFactory.createDivIcon({className:cityWay.consts.map.css.physicalGroupedNode,iconSize:nt,iconAnchor:tt,popupAnchor:it});for(c=0;typeof o[c]!="undefined";c++)b=o[c].getAttribute("data-id"),y=u(b,cityWay.pointType.physicalStop),y.setIsLogicalStopGrouped(!0),y.marker.setIcon(rt)}if(s.pointType!=cityWay.pointType.physicalStop&&s.setSelectedNode(),t.behaviors[cityWay.FilterItemsVisibilityByCircleBoundsBehavior.id].isEnabled()){t.behaviors[cityWay.FilterItemsVisibilityByCircleBoundsBehavior.id].setCircleData(s.latitude,s.longitude,h);(v||a)&&t.redrawMap();t.isBusy(!1);var k=s.circle.getBounds(),d=k.getNorthEast(),g=k.getSouthWest();t.fitBounds(t.mapControl.getMaxZoom(),[[g.lat,g.lng],[d.lat,d.lng]]);l.resolve(t.nodes())}else t.isBusy(!1);return l.promise()}}function o(n,i){var e,u,o,s,h;if(t.isBusy(!0),e=$.Deferred(),!n)t.isBusy(!1);else{o=!1;t._internalNodes().length===0&&(s=cityWay.mapNodeFactory.createNodeArrayFromAny(t,i),h=r(s),window.ko.utils.arrayPushAll(t._internalNodes,h),o=!0);u=t.getNodeByIdAndType(n.Id,n.TypePoint);u.lock();u.setSelectedNode();u.setDraggable(!0);u.marker.on("dragend",f);o&&t.redrawMap();t.isBusy(!1);t.fitBounds(17,[[u.latitude,u.longitude]]);e.resolve(t.nodes())}return e.promise()}function f(n){t.isBusy(!0);var i=cityWay.config.urls.nearByLocate.replace("{sid}","145").replace("{lat}",n.target._latlng.lat).replace("{lng}",n.target._latlng.lng);window.location.href=encodeURI(i)}if(!n||!n.map)throw new Error("Options must be specified");var t=n.map,i=this;return i.getNodeByIdType=u,i.populatePointsNearPoint=e,i.populatePoints=o,i}});$(function(){cityWay.DirectTripManager=function(n){"use strict";function r(){var n=t.mapControl.getBounds(),i=n.getSouthWest(),r=n.getNorthEast();cityWay.mapDataService.getPlacesInBoundingBox(i.lat,i.lng,r.lat,r.lng,cityWay.poi.category.locality.toString(),t.mapControl.getZoom()).then(function(n){if(n.Data){var i=Enumerable.From(n.Data).Select(function(n){return cityWay.mapNodeFactory.createLocalityNode(t,n.Locality.Id,n.Name,n.Latitude,n.Longitude)}).ToArray();t.setNodes(i)}else t.setNodes([])})}function u(n){var i=$.Deferred(),u;return n?(u=Enumerable.From(n).Select(function(n){return cityWay.mapNodeFactory.createLocalityNode(t,n.id,n.name,n.latitude,n.longitude)}).ToArray(),t.setNodes(u),t.fitBounds(),i.resolve()):(cityWay.eventManager.subscribe(cityWay.events.map.boundsChanged,r),r()),i.promise()}function f(n){var i=cityWay.mapNodeFactory.createNodeArrayFromAny(t,n);t.setNodes(i);t.fitBounds()}if(!n||!n.map)throw new Error("Options must be specified");var t=n.map,i=this;return i.drawLocalitiesOnMap=u,i.drawStopsOnMap=f,i}});window.onscroll=function(){$('[data-sticky-map="on"]').length&&cityWay.page.stickyMap()};cityWay.page=function(n){function i(n){return t[n]}function r(n){cityWay.page.map=n;cityWay.page.map.redrawMap();cityWay.modules.mapResponsive.bindPopup(cityWay.page.map)}function u(){n('[data-showmap="map-container"]').removeClass("tab-pane").removeClass("hidden-xs").removeClass("hidden-sm").addClass("show-map-container");n("body").css("overflow","hidden");cityWay.tools.isMapEnabled()&&(cityWay.page.map.redrawMap(),cityWay.page.map.hasNodes()&&cityWay.page.map.fitBounds());cityWay.eventManager.publish(cityWay.events.responsive.mapshown,cityWay.page.map)}function f(){n('[data-showmap="map-container"]').addClass("tab-pane").addClass("hidden-xs").addClass("hidden-sm").removeClass("show-map-container");n("body").css("overflow","");cityWay.eventManager.publish(cityWay.events.responsive.maphidden,cityWay.page.map)}function e(){var t;if(window.matchMedia("(min-width:"+i("screenSmMax")+"px)").matches){t=20;n("html").hasClass("navbar-fixed")&&(t+=n("header").outerHeight(!0));var r=n(window).scrollTop()+t,u=n('[data-sticky-map="container"]').offset().top,e=n('[data-sticky-map="container"]').height(),o=n('[data-sticky-map="on"]').height(),f=r-u;r>=u&&f<e-o?n('[data-sticky-map="on"]').css("margin-top",f):r<=u&&f&&n('[data-sticky-map="on"]').css("margin-top","")}}function o(n){cityWay.tools.focusFirst(document.getElementById(n))}var t=cityWay.tools.getLessVars("Responsive");return{stickyMap:e,initMap:r,showMap:u,hideMap:f,moveFocus:o}}(jQuery);window.onresize=function(){cityWay.responsive.isMobileOrTablet()===!1&&cityWay.responsive.executeOnresize()};window.addEventListener("orientationchange",function(){cityWay.responsive.executeOnresize()},!1);cityWay.responsive=function(n){function s(){var n=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(n=!0)}(navigator.userAgent||navigator.vendor||window.opera),n}function h(){is.ie()?setTimeout(e(),200):e()}function e(){cityWay.responsive.windowWidth=n(window).width();cityWay.responsive.returnToDesktop();cityWay.responsive.elementGoTo();cityWay.responsive.panelToCollapse();cityWay.responsive.timeTableTabs();cityWay.page.hideMap();cityWay.responsive.redrawMap();cityWay.responsive.moveMessageErrorFormSemiInline();cityWay.responsive.panelClosedOnMobile();cityWay.responsive.panelLocalitiesOpenedOnMobile()}function t(n){return o[n]}function c(){var e,r,o,u,i,f;if(cityWay.page.map!=null&&(cityWay.page.map.redrawMap(),cityWay.page.map.hasNodes()&&window.matchMedia("(min-width:"+t("screenSmMax")+"px)").matches)){for(e=0,r=0;r<n("#map_wrapper").children().length;r++)n("#map_wrapper").children()[r].id=="popup-map"&&e++;for(o=0;o<e;o++)n("#popup-map").remove();for(u=0,i=0;i<cityWay.page.map.nodes().length;i++)cityWay.page.map.nodes()[i].isPopupOpen()&&(u=cityWay.page.map.nodes()[i]);u!=0?(f=Enumerable.From(cityWay.page.map.nodes()).Where(function(n){return n.id==u.id}).FirstOrDefault(),f&&(f.closePopup(),setTimeout(function(){cityWay.page.map.fitBounds();f.openPopup()}))):cityWay.page.map.fitBounds()}}function l(){var r;window.matchMedia("(max-width:"+t("screenXsMax")+"px)").matches?i||(n('[data-id="panel-home"]').addClass("panel-group-accordion"),r=n('[data-id="panel-home"]').find(n('[data-id*="panel-"]')),r.find(n(".panel-collapse")).removeClass("in").attr("aria-expanded","false"),r.each(function(){var t=n(this).find('[data-detach*="panel-"]').detach(),i=n('<a class="item-with-img collapsed" role="tab" data-toggle="collapse" data-parent="#panel-home" href="#'+t.attr("data-detach")+'" aria-expanded="false" aria-controls="'+t.attr("data-detach")+'" aria-selected="false" tabindex="-1"><\/a>').html(t);n(this).find('[data-attach*="panel-"]').append(i)}),i=!0):i&&(n('[data-id="panel-home"]').removeClass("panel-group-accordion"),r=n('[data-id="panel-home"]').find(n('[data-id*="panel-"]')),r.find(n(".panel-collapse")).addClass("in").css("height",""),r.each(function(){var t=n(this).find('[data-detach*="panel-"]').detach();n(this).find(n("a.collapsed")).remove();n(this).find('[data-attach*="panel-"]').append(t)}),i=!1)}function a(){window.matchMedia("(max-width:"+t("screenXsMax")+"px)").matches?r||(n("[data-go-to]").each(function(){var t=n(this).children().detach();n('[data-come-from="'+n(this).attr("data-go-to")+'"]').append(t)}),r=!0):r&&(n("[data-come-from]").each(function(){var t=n(this).children().detach();n('[data-go-to="'+n(this).attr("data-come-from")+'"]').append(t)}),r=!1)}function v(){window.matchMedia("(max-width:"+t("screenXsMax")+"px)").matches?u||(n("[data-panel-closed-mobile]").each(function(){n(this).collapse("hide")}),u=!0):u&&(n("[data-panel-open-desktop]").each(function(){n(this).collapse("show")}),u=!1)}function y(){window.matchMedia("(max-width:"+t("screenSmMax")+"px)").matches?f||(n("[data-panel-localities]").addClass("in"),f=!0):f&&(n("[data-panel-localities]").removeClass("in"),f=!1,n(".panel-search-linetimetable").addClass("panel-selection"),n("[data-btn-localities]").addClass("collapsed"))}function p(){window.matchMedia("(max-width:"+t("screenSmMax")+"px)").matches&&n('[data-id="active-rwd-tabs"]').tab("show")}function w(){window.matchMedia("(min-width:"+t("screenSmMax")+"px)").matches&&(n(".navbar-collapse").removeClass("in"),n("[data-menu-scroll-rwd='indicator']").addClass("hidden"))}function b(){var r=n("[data-menu-scroll-rwd='true']"),i=n("[data-menu-scroll-rwd='indicator']");window.matchMedia("(max-width:"+t("screenSmMax")+"px)").matches?r.outerHeight(!0)>=t("MenuCollapseMaxHeight")?i.removeClass("hidden"):i.addClass("hidden"):i.addClass("hidden")}function k(){n(".form-semi-inline").length>0&&n(".form-semi-inline").each(function(){var u=n(this).find('[data-message-error="true"]'),r=n(this).find('[data-message-error-geoloc="true"]'),f=n(this).find(n(".btn-ok")),i;window.matchMedia("(min-width:"+t("screenSmMin")+"px)").matches?(i=r.detach(),i.insertAfter(f)):(i=r.detach(),i.insertAfter(u))})}var o=cityWay.tools.getLessVars("Responsive"),i=!1,r=!1,u=!1,f=!1;return{returnToDesktop:w,elementGoTo:a,timeTableTabs:p,panelToCollapse:l,getSize:t,redrawMap:c,resize:e,isMobileOrTablet:s,executeOnresize:h,menuTopScrollIndicator:b,moveMessageErrorFormSemiInline:k,panelClosedOnMobile:v,panelLocalitiesOpenedOnMobile:y}}(jQuery);$(document).ready(function(){$("[data-target*=#navbar-]").on("click",function(){$("[id*=navbar-]").each(function(){$(this).hasClass("in")&&$(this).collapse("hide")})});$("a[href='#map_container']").on("shown.bs.tab",function(){cityWay.tools.isMapEnabled()&&cityWay.page.map.redrawMap();$(window).trigger("resize")})});cityWay.mapIconSize=function(){function t(n){return n==10?["27","27"]:n==11?["27","27"]:n==12?["27","27"]:n==13?["27","27"]:n==14?["27","27"]:n==15?["27","27"]:n==16?["24","24"]:n==17?["24","24"]:n==18?["24","24"]:["24","24"]}function i(){return["27","27"]}function r(){return["27","27"]}function n(){return["27","27"]}function o(){return["48","48"]}function u(n){return n==10?["15","15"]:n==11?["15","15"]:n==12?["15","15"]:n==13?["15","15"]:n==14?["15","15"]:n==15?["20","20"]:n==16?["20","20"]:n==17?["20","20"]:n==18?["20","20"]:["15","15"]}function f(n){return n==10?["15","15"]:n==11?["15","15"]:n==12?["15","15"]:n==13?["15","15"]:n==14?["15","15"]:n==15?["20","20"]:n==16?["20","20"]:n==17?["20","20"]:n==18?["20","20"]:["15","15"]}function s(){return["30","30"]}function h(n){return f(n-1)===f(n)?!1:!0}function c(n){return u(n-1)===u(n)?!1:!0}function l(n){return t(n-1)===t(n)?!1:!0}function a(n){return i(n-1)===i(n)?!1:!0}function v(n){return r(n-1)===r(n)?!1:!0}function y(t){return n(t-1)===n(t)?!1:!0}function p(t){return n(t-1)===n(t)?!1:!0}function e(e,h,c,l,a){var v=cityWay.page.map.mapControl.getZoom();return h===!0?i(v):c===!0?r(v):l===!0?n(v):a===!0?o(v):e===cityWay.pointType.poi?t(v):e===cityWay.pointType.physicalStop?f(v):e===cityWay.pointType.logicalStop?u(v):e===cityWay.pointType.clusterStop?s(v):void 0}function w(n,t,i,r,u){var f=e(n,t,i,r,u);return t===!0?[f[0]/2,f[1]/2]:i===!0?[f[0]/2,f[1]/2]:r===!0?[f[0]/2,f[1]/2]:u===!0?[f[0]/2,f[1]/2]:n===cityWay.pointType.poi?[f[0]/2,f[1]]:n===cityWay.pointType.physicalStop?[f[0]/2,f[1]/2]:n===cityWay.pointType.logicalStop?[f[0]/2,f[1]/2]:void 0}function b(n,t,i,r,u){var f=e(n,t,i,r,u);return t===!0?[1,f[0]/-2]:i===!0?[1,f[0]/-2]:r===!0?[1,f[0]/-2]:u===!0?[1,f[1]/1.6*-1]:n===cityWay.pointType.poi?[0,f[0]*-1]:n===cityWay.pointType.physicalStop?[1,f[0]/-2]:n===cityWay.pointType.logicalStop?[1,f[0]/-2]:void 0}return{getIconSize:e,getIconAnchor:w,getPopupAnchor:b,getDiffphysicalStopIconSize:h,getDiffLogicalStopIconSize:c,getDiffPoiIconSize:l,getDiffDepartureIconSize:a,getDiffArivalIconSize:v,getDiffViaIconSize:y,getDiffSelectedIconSize:p}}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.carousel"),f=n.extend({},t.DEFAULTS,u.data(),typeof i=="object"&&i),e=typeof i=="string"?i:f.slide;r||u.data("bs.carousel",r=new t(this,f));typeof i=="number"?r.to(i):e?r[e]():f.interval&&r.pause().cycle()})}var t=function(t,i){this.$element=n(t);this.$indicators=this.$element.find(".carousel-indicators");this.options=i;this.paused=null;this.sliding=null;this.interval=null;this.$active=null;this.$items=null;this.options.keyboard&&this.$element.on("keydown.bs.carousel",n.proxy(this.keydown,this));this.options.pause!="hover"||"ontouchstart"in document.documentElement||this.$element.on("mouseenter.bs.carousel",n.proxy(this.pause,this)).on("mouseleave.bs.carousel",n.proxy(this.cycle,this))},u,r;t.VERSION="3.3.5";t.TRANSITION_DURATION=600;t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0};t.prototype.keydown=function(n){if(!/input|textarea/i.test(n.target.tagName)){switch(n.which){case 37:this.prev();break;case 39:this.next();break;default:return}n.preventDefault()}};t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(n.proxy(this.next,this),this.options.interval)),this};t.prototype.getItemIndex=function(n){return this.$items=n.parent().children(".item"),this.$items.index(n||this.$active)};t.prototype.getItemForDirection=function(n,t){var i=this.getItemIndex(t),f=n=="prev"&&i===0||n=="next"&&i==this.$items.length-1,r,u;return f&&!this.options.wrap?t:(r=n=="prev"?-1:1,u=(i+r)%this.$items.length,this.$items.eq(u))};t.prototype.to=function(n){var i=this,t=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(n>this.$items.length-1)&&!(n<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){i.to(n)}):t==n?this.pause().cycle():this.slide(n>t?"next":"prev",this.$items.eq(n))};t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&n.support.transition&&(this.$element.trigger(n.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this};t.prototype.next=function(){if(!this.sliding)return this.slide("next")};t.prototype.prev=function(){if(!this.sliding)return this.slide("prev")};t.prototype.slide=function(i,r){var e=this.$element.find(".item.active"),u=r||this.getItemForDirection(i,e),l=this.interval,f=i=="next"?"left":"right",a=this,o,s,h,c;return u.hasClass("active")?this.sliding=!1:(o=u[0],s=n.Event("slide.bs.carousel",{relatedTarget:o,direction:f}),this.$element.trigger(s),s.isDefaultPrevented())?void 0:(this.sliding=!0,l&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),h=n(this.$indicators.children()[this.getItemIndex(u)]),h&&h.addClass("active")),c=n.Event("slid.bs.carousel",{relatedTarget:o,direction:f}),n.support.transition&&this.$element.hasClass("slide")?(u.addClass(i),u[0].offsetWidth,e.addClass(f),u.addClass(f),e.one("bsTransitionEnd",function(){u.removeClass([i,f].join(" ")).addClass("active");e.removeClass(["active",f].join(" "));a.sliding=!1;setTimeout(function(){a.$element.trigger(c)},0)}).emulateTransitionEnd(t.TRANSITION_DURATION)):(e.removeClass("active"),u.addClass("active"),this.sliding=!1,this.$element.trigger(c)),l&&this.cycle(),this)};u=n.fn.carousel;n.fn.carousel=i;n.fn.carousel.Constructor=t;n.fn.carousel.noConflict=function(){return n.fn.carousel=u,this};r=function(t){var f=n(this),r=n(f.attr("data-target")),e,u;r.hasClass("carousel")&&(e=n.extend({},r.data(),f.data()),u=f.attr("data-slide-to"),u&&(e.interval=!1),i.call(r,e),u&&r.data("bs.carousel").to(u),t.preventDefault())};n(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r);n(window).on("load",function(){n('[data-ride="carousel"]').each(function(){var t=n(this);i.call(t,t.data())})})}(jQuery);+function(n){"use strict";var i,t,r;if(!("ontouchstart"in window||navigator.msMaxTouchPoints))return!1;i="touch-carousel";t=function(t,i){if(this.$element=n(t),this.$itemsWrapper=this.$element.find(".carousel-inner"),this.$items=this.$element.find(".item"),this.$indicators=this.$element.find(".carousel-indicators"),this.pane_width=this.pane_count=this.current_pane=0,this.onGesture=!1,this.options=i,this._setPaneDimensions(),this.$items.length<=1)return this.disable();this._regTouchGestures();n(window).on("orientationchange resize",n.proxy(this._setPaneDimensions,this))};t.DEFAULTS={interval:!1,toughness:.25};t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(n.proxy(this.next,this),this.options.interval)),this};t.prototype.to=function(n){if(!(n>this.$items.length-1)&&!(n<0))return this._showPane(n)};t.prototype.pause=function(n){return n||(this.paused=!0),clearInterval(this.interval),this.interval=null,this};t.prototype._regTouchGestures=function(){this.$itemsWrapper.add(this.$indicators).hammer({drag_lock_to_axis:!0,preventDefault:!0}).on("release dragleft dragright swipeleft swiperight",n.proxy(this._handleGestures,this))};t.prototype._setPaneDimensions=function(){this.pane_width=this.$element.width();this.pane_count=this.$items.length;this.$itemsWrapper.width(this.pane_width*this.pane_count);this.$items.width(this.pane_width)};t.prototype._showPane=function(n){var i,t;return this.$items.eq(this.current_pane).toggleClass("active"),n>=this.pane_count&&this.pause(),n=Math.max(0,Math.min(n,this.pane_count-1)),i=this.$items.eq(n).toggleClass("active"),this.current_pane=n,t=-(100/this.pane_count*this.current_pane),this._setContainerOffset(t,!0,n),this};t.prototype._setContainerOffset=function(t,i,r){var u=this,f;if(this.$itemsWrapper.removeClass("animate"),i&&this.$itemsWrapper.addClass("animate"),n.support.csstransforms3d?(this.onGesture=!0,this.$itemsWrapper.css("transform","translate3d("+t+"%,0,0) scale3d(1,1,1)")):n.support.csstransforms?(this.onGesture=!0,this.$itemsWrapper.css("transform","translate("+t+"%,0)")):(f=this.pane_width*this.pane_count/100*t,this.$itemsWrapper.css("left",f+"px")),n.support.transition)this.$itemsWrapper.one(n.support.transition.end,function(){u.$itemsWrapper.removeClass("animate");u.onGesture=!1;u._updateIndicators(r)});else this.$itemsWrapper.removeClass("animate"),this.onGesture=!1,this._updateIndicators(r)};t.prototype.next=function(){return this._showPane(this.current_pane+1)};t.prototype.prev=function(){return this._showPane(this.current_pane-1)};t.prototype._handleGestures=function(n){if(!this.sliding){this.pause();switch(n.type){case"dragright":case"dragleft":var i=-(100/this.pane_count)*this.current_pane,t=100/this.pane_width*n.gesture.deltaX/this.pane_count;(this.current_pane===0&&n.gesture.direction==Hammer.DIRECTION_RIGHT||this.current_pane==this.pane_count-1&&n.gesture.direction==Hammer.DIRECTION_LEFT)&&(t*=this.options.toughness);this._setContainerOffset(t+i);break;case"swipeleft":this.next();n.gesture.stopDetect();break;case"swiperight":this.prev();n.gesture.stopDetect();break;case"release":Math.abs(n.gesture.deltaX)>this.pane_width/2?n.gesture.direction=="right"?this.prev():this.next():this._showPane(this.current_pane,!0)}}};t.prototype.disable=function(){return this.$indicators.hide(),this.$element.removeData(i),!1};t.prototype._updateIndicators=function(n){return this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$indicators.children().eq(n).addClass("active")),this.$element.trigger("slid.bs.carousel"),this};r=n.fn.carousel;n.fn.carousel=function(r){return this.each(function(){var f=n(this),u=f.data(i),e=n.extend({},t.DEFAULTS,f.data(),typeof r=="object"&&r),o=typeof r=="string"?r:e.slide;u||f.data(i,u=new t(this,e)).addClass(i);typeof r=="number"?u.to(r):o?u[o]():e.interval&&u.pause().cycle()})};n.fn.carousel.Constructor=t;n.fn.carousel.noConflict=function(){return n.fn.carousel=r,this};n(document).off("click.bs.carousel").on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(t){var r=n(this),u=n(r.attr("data-target")),e=n.extend({},u.data(),r.data()),f=r.attr("data-slide-to");f&&(e.interval=!1);u.carousel(e);(f=r.attr("data-slide-to"))&&u.data(i).to(f);t.preventDefault()})}(window.jQuery);$(document).ready(function(){$(".cw-media").on("click",function(){var n=$(this).attr("data-state");n==="play"?($(this).removeClass("play").addClass("pause"),$(this).attr("data-state","pause"),$("#cw-carousel").carousel("pause")):n==="pause"&&($(this).removeClass("pause").addClass("play"),$(this).attr("data-state","play"),$("#cw-carousel").carousel("cycle"))});var t=$("#cw-carousel").find(".carousel-inner .active").data("interval"),n=setTimeout("$('#cw-carousel').carousel();",t-1e3);$("#cw-carousel").on("slid.bs.carousel",function(){if($(".cw-media").hasClass("play")){clearTimeout(n);var t=$(this).find(".carousel-inner .active").data("interval");$(this).carousel("pause");n=setTimeout("$('#cw-carousel').carousel();",t-1e3)}});$(".carousel-control.left, .carousel-control.right, .cw-item").on("click",function(){clearTimeout(n);$(".cw-media").removeClass("pause").addClass("play");$(".cw-media").attr("data-state","play");$("#cw-carousel").carousel("cycle")});$("#cw-carousel").on("slide.bs.carousel",function(){if($(".cw-media").hasClass("pause"))return $("#cw-carousel").carousel("pause"),!1})});